from geopy import Point

from streetcrawl.points_in_square import PointsInSquare
import pytest


@pytest.fixture
def pts():
    return PointsInSquare(
        Point(50.34230961203757, 27.894199383237012),
        step=30,
        square_side=200,
    )


def test_points_in_square_upper_left_corner(pts):
    assert pts.upper_left_corner() == Point(50.343208595809756, 27.89279460091077, 0.0)


def test_points_in_square_iter(pts):
    assert list(pts) == [
        Point(50.34320859580976, 27.89279460091077, 0.0),
        Point(50.34293889814741, 27.89279460091077, 0.0),
        Point(50.34266920047247, 27.89279460091077, 0.0),
        Point(50.34239950278497, 27.89279460091077, 0.0),
        Point(50.34212980508487, 27.89279460091077, 0.0),
        Point(50.34186010737222, 27.89279460091077, 0.0),
        Point(50.34159040964698, 27.89279460091077, 0.0),
        Point(50.34320859504612, 27.893216043563715, 0.0),
        Point(50.34293889738377, 27.893216043563715, 0.0),
        Point(50.34266919970884, 27.893216043563715, 0.0),
        Point(50.34239950202133, 27.893216043563715, 0.0),
        Point(50.342129804321246, 27.893216043563715, 0.0),
        Point(50.34186010660857, 27.893216043563715, 0.0),
        Point(50.34159040888335, 27.893216043563715, 0.0),
        Point(50.34320859275522, 27.89363748621663, 0.0),
        Point(50.342938895092864, 27.89363748621663, 0.0),
        Point(50.34266919741793, 27.89363748621663, 0.0),
        Point(50.342399499730426, 27.89363748621663, 0.0),
        Point(50.342129802030335, 27.89363748621663, 0.0),
        Point(50.34186010431767, 27.89363748621663, 0.0),
        Point(50.34159040659244, 27.89363748621663, 0.0),
        Point(50.34320858893704, 27.894058928869494, 0.0),
        Point(50.34293889127468, 27.894058928869494, 0.0),
        Point(50.342669193599754, 27.894058928869494, 0.0),
        Point(50.34239949591224, 27.894058928869494, 0.0),
        Point(50.34212979821215, 27.894058928869494, 0.0),
        Point(50.34186010049948, 27.894058928869494, 0.0),
        Point(50.34159040277426, 27.894058928869494, 0.0),
        Point(50.343208583591576, 27.894480371522278, 0.0),
        Point(50.34293888592923, 27.894480371522278, 0.0),
        Point(50.342669188254284, 27.894480371522278, 0.0),
        Point(50.34239949056679, 27.894480371522278, 0.0),
        Point(50.34212979286669, 27.894480371522278, 0.0),
        Point(50.34186009515403, 27.894480371522278, 0.0),
        Point(50.34159039742879, 27.894480371522278, 0.0),
        Point(50.34320857671885, 27.89490181417495, 0.0),
        Point(50.3429388790565, 27.89490181417495, 0.0),
        Point(50.34266918138156, 27.89490181417495, 0.0),
        Point(50.34239948369406, 27.89490181417495, 0.0),
        Point(50.34212978599397, 27.89490181417495, 0.0),
        Point(50.3418600882813, 27.89490181417495, 0.0),
        Point(50.341590390556064, 27.89490181417495, 0.0),
        Point(50.34320856831885, 27.895323256827492, 0.0),
        Point(50.342938870656496, 27.895323256827492, 0.0),
        Point(50.34266917298156, 27.895323256827492, 0.0),
        Point(50.34239947529406, 27.895323256827492, 0.0),
        Point(50.34212977759396, 27.895323256827492, 0.0),
        Point(50.3418600798813, 27.895323256827492, 0.0),
        Point(50.34159038215607, 27.895323256827492, 0.0),
    ]
